import{g as d,e as c,s as u}from"./cookies-2118fce7.js";import{a as m}from"./axios-1779699b.js";import{s as p}from"./sharePageMenu-adc27c4b.js";import{l as C}from"./chart-43d2a988.js";async function g(n,i,o){const s=d("favoritePlans");let e=[];const a=new FormData;a.set("code",n),a.set("type","apartment"),s&&(e=s.split(",")),e.includes(n)?(e=e.filter(l=>l!=n),i.className="plan-card card-button",a.set("action","remove")):(e.push(n),i.className+=" orange",a.set("action","add")),c("cachedFavoritePlansCount"),e.length>0?u("favoritePlans",e.join(","),365):c("favoritePlans");const r=await m.post("/api/switch-like",a),t=new Event("likesUpdated");t.newPlanCount=Number.parseInt(r.data.plans),t.newBuildingCount=Number.parseInt(r.data.buildings),t.newCount=Number.parseInt(r.data.total),t.code=n,t.action=a.get("action"),t.button=i,t.apartment_type=o.getAttribute("apartment_type"),t.area=o.getAttribute("area"),t.price=o.getAttribute("price"),document.dispatchEvent(t)}function v(n="plan-card container"){Array.from(document.getElementsByClassName(n)).forEach(o=>{const s=o.getAttribute("offerId"),e=o.getElementsByClassName("plan-card card-button"),a=e[0];a.onclick=()=>g(s,a,o);const t=e[1].id;C(o),p(t,()=>window.location.host+"/"+s)})}export{g as a,v as l};
