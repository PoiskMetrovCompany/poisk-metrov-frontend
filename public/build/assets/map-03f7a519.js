let e=null;async function y(n="temp-map-container"){const l=[localStorage.getItem("longitude"),localStorage.getItem("latitude")],i=17,s=document.getElementById(n);if(await ymaps3.ready,ymaps3===void 0)return[null,null,null];const{YMap:c,YMapDefaultSchemeLayer:o,YMapDefaultFeaturesLayer:a,YMapListener:r}=ymaps3,t=new r({});e&&(e.destroy(),e=null),e=new c(s,{location:{center:l,zoom:i}}),e.addChild(new o),e.addChild(new a),e.addChild(t),document.getElementsByClassName("ymaps3x0--map-copyrights_right")[0].style.right="50px";const m=s.getElementsByTagName("ymaps")[0];return[e,ymaps3,m]}async function E(){try{const n=localStorage.getItem("longitude"),l=localStorage.getItem("latitude"),i=[n,l],s=17;if(!e){await y();return}const c=document.getElementById("temp-map-container");c&&c.querySelectorAll(".infrastructure.menu.icon-container").forEach(m=>m.remove()),await e.update({location:{center:i,zoom:s}});const{YMapMarker:o}=ymaps3,a=document.createElement("div");a.className="infrastructure menu icon-container icon d44x44";const r=new o({coordinates:i},a);e.addChild(r)}catch{try{await y()}catch(l){console.error("Error recreating map:",l)}}}async function w(n,l,i,s,c){const o=document.getElementById("temp-map-container"),a=document.getElementById(n.id+"-map-button");document.getElementById("background-"+n.id);const r=document.getElementById(n.id+"-map"),t=document.getElementById(n.id+"-map"),m=Number.parseFloat(n.getAttribute("long")),g=Number.parseFloat(n.getAttribute("lat"));let h=l;t.style.display="none",a.onclick=async()=>{t.style.display=="none"?(c(),await f()):u()};function d(){r.getElementsByTagName("ymaps").length>0&&(r.style.width=t.parentElement.clientWidth+4+"px",r.style.height=t.parentElement.clientHeight+4+"px",o.style.width=t.clientWidth+4+"px",o.style.height=t.clientHeight+4+"px")}const p=new ResizeObserver(d);p.observe(t.parentElement),p.observe(document.body);async function f(){try{t.style.display="block",a.className=a.className.replace("card-button","card-button orange"),localStorage.setItem("longitude",m),localStorage.setItem("latitude",g),await E(),e&&(h=e,r.appendChild(o.getElementsByTagName("ymaps")[0]),d())}catch(b){console.error("Error in select:",b)}}function u(){t.style.display="none",a.className=a.className.replace("card-button orange","card-button"),s&&o&&o.appendChild(s)}return u}export{y as l,w as s,E as u};
