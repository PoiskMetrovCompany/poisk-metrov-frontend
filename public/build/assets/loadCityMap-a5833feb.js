import{s as x}from"./sleep-9eff569f.js";import{g as Y}from"./cookies-2118fce7.js";let w;function I(a,e,c){const t=document.createElement("div");t.className="full-screen-map location-with-name";const o=document.createElement("span");o.textContent=e.name;const r=document.createElement("div");r.className="icon place d20x20 white";const s=document.createElement("div");s.className="full-screen-map icon-container",s.appendChild(r),t.appendChild(s),t.appendChild(o);const{YMapMarker:i}=c,d=new i({coordinates:[e.longitude,e.latitude]},t);return a.addChild(d),w=a,t}let y;function T(a,e,c){const t=document.createElement("div"),o="full-screen-map building-card",r=document.createElement("img"),s=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),f=document.createElement("a");t.className=o,s.classList="full-screen-map building-card-text",i.className="building-cards name",d.className="building-cards group",f.className="full-screen-map full-size-link",i.textContent=c.name,d.textContent=c.builder,f.href="/"+c.code,c.previewImage!=""&&(r.loading="lazy",t.appendChild(r)),s.appendChild(i),s.appendChild(d),t.appendChild(s),t.appendChild(f),c.apartmentSpecifics.forEach(m=>{const l=document.createElement("div"),p=document.createElement("div"),h=document.createElement("div");l.className="full-screen-map building-card-line",p.className="building-cards title-section",h.className="building-cards description",p.textContent=m.name,h.textContent=m["min-price"],l.appendChild(p),l.appendChild(h),s.appendChild(l)});const n=t.cloneNode(!0);a.appendChild(n),n.className+=" mobile";const u=document.createElement("a"),b=document.createElement("div"),g=document.createElement("div"),E=document.createElement("div");u.className="common-button",u.textContent="Перейти в ЖК",b.className="common-button",b.textContent="Закрыть",g.className="full-screen-map mobile-bottom-buttons",E.className="full-screen-map mobile-handle",g.appendChild(u),g.appendChild(b),n.appendChild(g),n.appendChild(E),n.insertBefore(E,n.firstChild),u.href=f.href,b.onclick=()=>k();let N=!1;e.setAttribute("tabindex",-1),e.addEventListener("click",m=>{t.className=o+" visible",n.className=o+" mobile visible";const l=c.previewImage.startsWith("http")?"":"/";r.src=`${l}${c.previewImage}`;const{YMapListener:p}=ymaps3;function h(C){N||(t.className=o)}const z=new p({layer:"any",onPointerUp:C=>h(),onTouchEnd:C=>h(),onActionStart:()=>{N=!0},onActionEnd:()=>{N=!1}});w.addChild(z),e.onblur=C=>{C.relatedTarget!=null&&C.relatedTarget.className==e.className&&(t.className=o)},y!=null&&(y.className=o+" mobile"),y=n,y.querySelector("img").src=`${l}${c.previewImage}`,e.parentElement.parentElement.lastChild.after(e.parentElement),e.focus()});let v={x:0,y:0};n.addEventListener("touchstart",B,!1),n.addEventListener("touchend",L,!1);function B(m){v.x=m.changedTouches[0].pageX,v.y=m.changedTouches[0].pageY}function L(m){let l={};l.x=v.x-m.changedTouches[0].pageX,l.y=v.y-m.changedTouches[0].pageY;const p=-Number.parseInt(n.clientHeight)/8;return l.y<p&&k(),l}function k(){n.className=o+" mobile",y=void 0}e.appendChild(t),a.appendChild(n)}async function P(a,e,c,t,o=!0){for(let s=0;s<a.length;s++){const i=a[s],d=I(c,i,t);o&&await x(20),T(e,d,i),o&&await x(20)}}const S={novosibirsk:[83,55],"st-petersburg":[30.5,60],"black-sea":[39.8,43.5],crimea:[34.4,45],moscow:[37.7,55.8],chelyabinsk:[61.45,55.15],ekaterinburg:[60.7,56.85],kaliningrad:[20.5,54.7],voronezh:[39.2,51.65],"far-east":[132,43.25],krasnodar:[39,45],thailand:[98.5,7.95],ufa:[56,54.7],kazan:[49.1,55.7]},q=["novosibirsk","st-petersburg","novosibirsk","black-sea","crimea","moscow","chelyabinsk","ekaterinburg","kaliningrad","voronezh","far-east","krasnodar","thailand","ufa","kazan"];function M(){const a=Y("selectedCity");if(a){const e=a.toLowerCase().replace(" ","-");if(q.includes(e))return e}return"st-petersburg"}typeof currentCityCached<"u"&&(currentCityCached=M());function U(a){a.className+=" visible";const e=document.querySelector("mobile-toolbar");e.style.zIndex=8,"ontouchstart"in document.documentElement&&document.body.requestFullscreen(),document.body.style.overscrollBehaviorY="contain"}function $(a,e){a.className=e;const c=document.querySelector("mobile-toolbar");c.style.zIndex="",document.fullscreenElement!=null&&document.exitFullscreen(),document.body.style.overscrollBehaviorY=""}async function X(a){var u;const e=document.getElementById(a);if(!e)return[null,null,null];const c=e.className,t=S[M()],o=11;if(await ymaps3.ready,ymaps3===void 0)return;const{YMap:r,YMapDefaultSchemeLayer:s,YMapDefaultFeaturesLayer:i,YMapListener:d}=ymaps3,f=new d({}),n=new r(e,{location:{center:t,zoom:o}});return n.addChild(new s),n.addChild(new i),n.addChild(f),(u=e.querySelector(".full-screen-map.close"))==null||u.addEventListener("click",()=>$(e,c)),document.getElementsByClassName("ymaps3x0--map-copyrights_right")[0].style.right="50px",[e,n,ymaps3]}export{P as f,X as l,U as o};
