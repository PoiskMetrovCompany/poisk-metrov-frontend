# **<img src="https://avatars.githubusercontent.com/u/180920011?s=200&v=4" alt="–õ–æ–≥–æ—Ç–∏–ø" width="26" /> –ü–û–ò–°–ö –ú–ï–¢–†–û–í**


## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Infrastructure**: ***<span style="color: #6074d5;">Linux, Nginx, MySQL 8</span>***
- **Backend**: ***<span style="color: #6074d5;">PHP 8.1 (Laravel 10)</span>***
- **CI\CD**: ***<span style="color: #6074d5;">Jenkins</span>***

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
### –°–æ–∑–¥–∞—Ç—å/–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥, –∫–∞–∫ –º–∏–Ω–∏–º—É–º –Ω–∞–¥–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î:
```bash
  (sudo) cp .example.env .env
```

### –ü–æ–¥–Ω—è—Ç—å docker:
```bash
  (sudo) docker-compose up --build -d
```

### –°–æ–∑–¥–∞—Ç—å/–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥, –¥–ª—è —Ä–∞–±–æ—Ç—ã Laravel:
```bash
  (sudo) cp ./sources/.env.example ./sources/.env
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
  (sudo) docker-compose run php-fpm composer install
```

### –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏: (–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –±–∞–∑–∞)
```bash
  (sudo) docker-compose run php-fpm php artisan migrate
```

### –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å CSRF —Ç–æ–∫–µ–Ω:
```bash
  (sudo) docker-compose run php-fpm php artisan key:generate
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –∏ –≥—Ä—É–ø–ø—É –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –ø—Ä–æ–µ–∫—Ç–æ–º:
```bash
  sudo chmod -R 777 $PWD
  sudo chown -R my-group:my-group $PWD
```

### –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ storage:
```bash
  (sudo) docker-compose run php-fpm php artisan storage:link
```

### –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –¥–∞–º–ø –±–∞–∑—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
***–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:1080/***

### –°—Ö–µ–º–∞ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
***–î–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: https://dbdiagram.io/d/67c92a64263d6cf9a0650409***

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:
# Nginx + PHP: http://localhost:1080
# MySQL: localhost:3306
# MongoDB: localhost:27017
# Memcached: localhost:11211

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
# Prometheus: http://localhost:9090
# Grafana: http://localhost:3000 (admin/admin)
# Node Exporter: http://localhost:9100
# Nginx Exporter: http://localhost:9113
```

#### ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ**: CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç—å (Node Exporter)
- **Nginx**: –∑–∞–ø—Ä–æ—Å—ã, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å—ã –æ—Ç–≤–µ—Ç–æ–≤
- **Prometheus**: —Å–∞–º–æ-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
- **MySQL —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä**: —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **Memcached —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä**: —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è


# Poisk Metrov - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
```

## üìä –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- **Nginx + PHP**: http://localhost:1080
- **MySQL**: localhost:13306
- **MongoDB**: localhost:37017
- **RabbitMQ**: localhost:15673

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3000 (admin/admin)
- **MySQL Exporter**: http://localhost:9104/metrics
- **Nginx Exporter**: http://localhost:9113/metrics

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### –°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **Nginx**: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∑–∞–ø—Ä–æ—Å—ã, —Å—Ç–∞—Ç—É—Å
- **MySQL**: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∑–∞–ø—Ä–æ—Å—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **PHP-FPM**: –ø—Ä–æ—Ü–µ—Å—Å—ã, –æ—á–µ—Ä–µ–¥—å
- **RabbitMQ**: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –æ—á–µ—Ä–µ–¥–∏, —Å–æ–æ–±—â–µ–Ω–∏—è

### Dashboard –≤ Grafana:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ http://localhost:3000
2. –õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin
3. Dashboard: "System Overview - Poisk Metrov (Exporters)"

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–≠–∫—Å–ø–æ—Ä—Ç–µ—Ä—ã**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–æ—Ç–æ–≤—ã–µ Prometheus —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä—ã
- **–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫**: –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- **–•—Ä–∞–Ω–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ Prometheus
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: Grafana —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π

## üèôÔ∏è –†–∞–±–æ—Ç–∞ —Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è–º–∏ –≥–æ—Ä–æ–¥–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–∏–¥–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü—É `locations` –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –≥–æ—Ä–æ–¥–æ–≤ (–ù–°–ö, –°–ü–ë, –ú–°–ö) –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–∞ –ª–∞—Ç–∏–Ω–∏—Ü–µ.

### –†–µ—à–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –≤ –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ñ–∏–¥–æ–≤.

### –ö–æ–º–∞–Ω–¥—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π
```bash
docker-compose exec php-fpm php artisan app:test-abbreviation-expansion
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π:
- –ù–°–ö ‚Üí novosibirsk
- –°–ü–ë ‚Üí st-petersburg  
- –ú–°–ö ‚Üí moscow
- –ö–†–î ‚Üí krasnodar
- –†–°–¢ ‚Üí rostov
- –ö–ó–ù ‚Üí kazan
- –ï–ö–ë ‚Üí ekaterinburg
- –ò –¥—Ä—É–≥–∏–µ...

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose exec php-fpm php artisan app:fix-location-abbreviations
```
–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `locations` —Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è–º–∏ –Ω–∞ –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è
| –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ | –†–µ–≥–∏–æ–Ω | –°—Ç–æ–ª–∏—Ü–∞ | –ö–æ–¥ |
|------------|--------|---------|-----|
| –ù–°–ö | –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ | novosibirsk |
| –°–ü–ë | –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ | –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥ | st-petersburg |
| –ú–°–ö | –ú–æ—Å–∫–≤–∞ | –ú–æ—Å–∫–≤–∞ | moscow |
| –ö–†–î | –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π | –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä | krasnodar |
| –†–°–¢ | –†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É | rostov |
| –ö–ó–ù | –†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω | –ö–∞–∑–∞–Ω—å | kazan |
| –ï–ö–ë | –°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ | ekaterinburg |
| –ß–õ–ë | –ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –ß–µ–ª—è–±–∏–Ω—Å–∫ | chelyabinsk |
| –ö–õ–ì | –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥ | kaliningrad |
| –í–†–ù | –í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å | –í–æ—Ä–æ–Ω–µ–∂ | voronezh |
| –ö–†–ú | –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º | –°–∏–º—Ñ–µ—Ä–æ–ø–æ–ª—å | crimea |
| –°–ß | –°–æ—á–∏ | –°–æ—á–∏ | black-sea |
| –£–§–ê | –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω –†–µ—Å–ø—É–±–ª–∏–∫–∞ | –£—Ñ–∞ | ufa |
| –î–í | –ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π | –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫ | far-east |
| –¢–ê–ô | –¢–∞–∏–ª–∞–Ω–¥ | –ü—Ö—É–∫–µ—Ç | thailand |